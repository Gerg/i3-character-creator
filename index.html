<html>
	<head>
		<title>Untold the Game | Character Builder</title>
		<meta charset="utf-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		
		<!-- Style sheets -->
		<link href='http://fonts.googleapis.com/css?family=PT+Sans:400,700' rel="stylesheet" type="text/css" />
		<link rel="stylesheet" type="text/css" href="styles/styles.css" />
		<link rel="stylesheet" type="text/css" href="styles/dialog.css" />
		<link rel="stylesheet" type="text/css" href="styles/iconic.css" />
	</head>
	<body>
		<section id="header">
			<nav id="navigation">
				<a href="#help" onClick="openDialog('help');return false;">help</a> | 
				<a href="#about" onClick="openDialog('about');return false;">about</a> | 
				<a href="/user/logout">logout</a>
			</nav>
			<img id="logo" src="images/logo.png"/>
			<h1>character builder</div>
		</section>
		<section id="content">
				<section class="row">
					<div id="charName">
						<h2 contenteditable>[Character Name]</h2>
					</div>
				<nav id="menu">
					<a class="navButton" href='#' onClick="newChar()">new</a>
					<a class="navButton" href='#' onClick="loadChar()">load</a>
					<a class="navButton" href='#' onClick="save()">save</a>
				</nav>
				</section>
				<section class="row">
					<section id="charInfo">
						<div id="cardImgHolder" class="border">
							<img class="card" id="cardImg" card="" src="images/unknown.png">
						</div>
						<div id="charDisc" class="border">
							<h3>Character Bio</h3>
							<p contenteditable id="charDiscTxt">
								
							</p>
						</div>
					</section>
					<div id="stats" class="border buffer">
						<table>
							<tr>
								<td> &nbsp;
								</td>
								<td>
									<img class="statsIcon" src="images/ATK.png"/> Attack
								</td>
								<td>
									<img class="statsIcon" src="images/DEF.png"/> Defense
								</td>
								<td>
									<img class="statsIcon" src="images/BOOST.png"/> Boost
								</td>
							</tr>
							<tr>
								<td>
									<img class="statsIcon" src="images/VIT.png"/> Body
								</td>
								<td id="atkBody" class="statNum body attack">
									0
								</td>
								<td id="defBody" class="statNum body defense">
									0
								</td>
								<td id="boostBody" class="statNum body boost">
									0
								</td>
							</tr>
							<tr>
								<td>
									<img class="statsIcon" src="images/VIT.png"/> Mind
								</td>
								<td id="atkMind" class="statNum mind attack">
									0
								</td>
								<td id="defMind" class="statNum mind defense">
									0
								</td>
								<td id="boostMind" class="statNum mind boost">
									0
								</td>
							</tr>
							<tr>
								<td>
									<img class="statsIcon" src="images/VIT.png"/> Soul
								</td>
								<td id="atkSoul" class="statNum soul attack">
									0
								</td>
								<td id="defSoul" class="statNum soul defense">
									0
								</td>
								<td id="boostSoul" class="statNum soul boost">
									0
								</td>
							</tr>
							<tr>
								<td>
									<img class="statsIcon" src="images/VIT.png"/> Vitality
								</td>
								<td id="vitality" class="statNum">
									0
								</td>
							</tr>
						</table>
					</div>
				</section>
				<section class="row">
					<div class="pointCount border">
						<div class="pointsLabel">
							<img class="pointsIcon" src="images/UP.png"/>
							total UP
						</div>
						<div contenteditable class="pointsVal" id="pointsUP">
							0
						</div>
					</div>
					<div class="pointCount border" id="buffer-points">
						<div class="pointsLabel">
							<img class="pointsIcon" src="images/UP.png"/>
							swap buffer
						</div>
						<div class="pointsVal" id="pointsSB">
							0
						</div>
					</div>
				</section>
				
				<!-- Overlay for when dragging a card -->
				<div id="trash-overlay" class="deckContent">
					<div class="iconic trash" id="trash-icon"></div>
				</div>
				
				
				<section class="row" id="decks">
					<div class="deck border" id="character-deck">
						<div class="deckTitle">
							Character Deck
							<button onclick="addCard('char')" class="addCard" id="add-character-card">+</button>
						</div>
						<div class="deckContent" id="charDeckContent">
							<!-- Will be added dynamically -->
						</div>
					</div>
					<div class="deck border" id="hot-swap-deck">
						<div class="deckTitle">
							Hot Swap Buffer
							<button onclick="addCard('swap')" class="addCard" id="add-hot-swap-card">+</button>
						</div>
						<div class="deckContent" id="swapDeckContent">
							<!-- Will be added dynamically -->
						</div>
					</div>
				</section>
				<section class="row">
					<div id="notes" class="border">
						<h3>Notes:</h3>
						<p contenteditable id="notesText">
							Cupcake ipsum dolor sit amet. Brownie carrot cake biscuit croissant. Applicake applicake I love. Wafer carrot cake ice cream chocolate sweet. Halvah I love sweet. Marzipan icing I love faworki. Lemon drops chocolate dragée halvah tart cake pastry bear claw. Danish gummies cotton candy dessert lollipop. Cookie caramels pie bear claw pastry marshmallow jelly. Candy canes I love ice cream apple pie sweet roll fruitcake applicake chocolate cake.
							Gingerbread I love ice cream pastry wafer brownie croissant jujubes I love. Toffee wafer dragée jelly-o chocolate cheesecake candy. Marshmallow soufflé wafer sesame snaps. Fruitcake I love I love carrot cake dessert cupcake chocolate. Bear claw cheesecake candy cheesecake candy canes I love. Cotton candy cheesecake carrot cake jelly beans soufflé. Jujubes gummies macaroon lemon drops. Halvah cupcake ice cream fruitcake. Carrot cake dragée biscuit soufflé cupcake jelly-o gummies jelly beans candy.
						</p>
					</div>
				</section>
		</section>
		
		<script type="text/template" id="_testing">
		<h1>Hi!</h1>
		<div id="dialog-footer">
		<button>un-close</button>
		</div>
		</script>
		
		<!--- Templates for alert dialogs go here -->
		<!--- the ID of the script tag is how you reference the dialogs -->
		<!--- Ex: openDialog('about') opens a dialog with the content of the id="_about" tag -->
		<script type="text/template" id="_about">
			<h1>
				The I3 Character Builder Team
			</h1>
			<table>
				<tr>
					<th>
						<h2>
							Team 1
						</h2>
					</th>
					<th>
						<h2>
							Team 2
						</h2>
					</th>
					<th>
						<h2>
							Team 3
						</h2>
					</th>
				</tr>
				<tr>
				
				<!-- Team 1 -->
					<td>
						<strong>Project Manager</strong><br>
						<a href="http://www.linkedin.com/in/aarongoldsmith" target="_blank">Aaron Goldsmith</a><br>
						<br>
						<strong>Managing Editor</strong><br>
						<a href="mailto:kmasoor3@gatech.edu">Krishna Masoor</a><br>
						<br>
						<strong>Writer &amp; Programmer</strong><br>
						<a href="http://www.enriquesantos.net/" target="_blank">Enrique Santos</a><br>
						<br>
						<strong>Graphic Designers</strong><br>
						<a href="mailto:hkhokhar3@gatech.edu">Hassan Khokhar</a> &amp; <a href="http://www.linkedin.com/pub/elizabeth-lemar/32/a61/243" target="_blank">Elizabeth LeMar</a><br>
						<br>
						<strong>Programmers</strong><br>
						<a href="http://www.linkedin.com/pub/robert-basilio/32/a63/792" target="_blank">Robert Basilio</a>, <a href="mailto:gchen7@gatech.edu">George Chen</a>,<br>
						<a href="https://www.facebook.com/profile.php?id=1218266014" target="_blank">Sean Chiem</a> &amp; <a href="mailto:rloftin3@gatech.edu">Robert Loftin</a><br>
					</td>
					
					<!-- Team 2 -->
					<td>
						<strong>Project Manager</strong><br>
						<a href="#">Jason Molargik</a><br>
						<br>
						<strong>Managing Editor</strong><br>
						<a href="#">Courtney McCormick</a><br>
						<br>
						<strong>Writers</strong><br>
						<a href="#">Christopher Trimble</a> &amp; <a href="mailto:">Vladimir Grantcharov</a><br>
						<br>
						<strong>Graphic Designer</strong><br>
						<a href="#">William Grier</a><br>
						<br>
						<strong>Programmers</strong><br>
						<a href="#">Andrew Monroe</a>, <a href="#">Irfan Somani</a>, &amp;<br>
						<a href="#">Nigel Lawrence</a><br>
					</td>
					
					<!-- Team 3 -->
					<td>
						<strong>Project Manager</strong><br>
						<a href="#">Jason Molargik</a><br>
						<br>
						<strong>Managing Editor</strong><br>
						<a href="#">Courtney McCormick</a><br>
						<br>
						<strong>Writers</strong><br>
						<a href="#">Christopher Trimble</a> &amp; <a href="#">Vladimir Grantcharov</a><br>
						<br>
						<strong>Graphic Designer</strong><br>
						<a href="#">William Grier</a><br>
						<br>
						<strong>Programmers</strong><br>
						<a href="#">Andrew Monroe</a>, <a href="#">Irfan Somani</a>, &amp;<br>
						<a href="#">Nigel Lawrence</a><br>
					</td>
				</tr>
			</table>
		</script>
		
		
		<script type="text/template" id="_help">
			<h1>Help</h1>
			<p>Here we should write up something that would help the user. Maybe describe some stuff?</p>
		</script>

		<script type="text/template" id="_saved">
			<h1>Character Saved</h1>
			<p>Your character has been saved!</p>
		</script>
		
		<script type="text/template" id="_saving">
			<h1>Saving </h1>
			<p>Please Wait</p>
			<div id="dialog-footer">...</div>
		</script>
		
		<script type="text/template" id="_load">
			<h1>Load</h1>
			<section id="loader">
				<div id="character-list-container">
					<div id="character-list">
					</div>
				</div>
				<div id="character-image-container">
					<div id="character-image">
						<img src="" alt="" />
					</div>
				</div>
			</section>
			
			<div id="dialog-footer">
				<div id="footer-left">
					<button id="delete-character" onClick="deleteChar()">Delete</button>
				</div>
				<button id="cancel-button" onClick="closeDialog()">Cancel</button>
				<button id="load-character" onClick="doLoad()">Load</button>
			</div>
		</script>

		<script type="text/template" id="_addCard">
			<h1>Add Card</h1>
			<div class="deck border" id="deck">
				<div class="deckTitle">
					Deck
				</div>
				<div class="deckContent" id="charDeckContent">
					<!-- Will be added dynamically -->
				</div>
			</div>
			<div class="deck border" id="hot-swap-deck-add">
				<div class="deckTitle">
					Hot Swap Buffer
				</div>
				<div class="deckContent" id="swapDeckContent">
					<!-- Will be added dynamically -->
				</div>
			</div>
			
			<div id="dialog-footer">
				<button id="cancel-button" onClick="closeDialog()">Cancel</button>
				<button id="add-cards" onClick="addCards()">Add</button>
			</div>
		</script>
		
		<script type="text/template" id="card">
			<div class="deckCard {color} card" card="{id}">
				<div class="cardCost">
					{cost}
				</div>
				<div class="cardName">
					{name}
				</div>
			</div>
		</script>
		
		
		
		
		
		
		
		<!-- Javascript -->
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
		<script src="scripts/dialog.js"></script>
		<script src="scripts/builder.js"></script>
		
		<script>
		// Check that we are not pressing enter in the box and that it meets size requirements.
		$(document).delegate("#charName h2, #pointsUP","keydown",function(){
			if ( event.keyCode == 13 ){
				$(this).blur();
			}
			// if ( ($("#charName h2").html().length > 35 && event.keyCode != 8 && event.keyCode != 46) ){
			// 	return false;
			// }
		});
		
		/******************
		 * Updaters
		 *
		 * These are used to update the values when 
		 * the user navigates away from the editable 
		 * element. 
		 ******************/
		$(document).delegate("#charName h2","blur",function(){
			character.name = $(this).html().trim();
			character.sessionSave();
		});
		$(document).delegate("#charDiscTxt","blur",function(){
			character.description = $(this).html().trim();
			character.sessionSave();
		});
		$(document).delegate("#pointsUP", "blur", function(){
			var newValue = parseFloat($(this).html().trim());
			if ( !isNaN(newValue) ){
				character.totalUP = newValue;
			}
			reloadUP();
		});
		$(document).delegate("#notesText", "blur", function(){
			character.notes = $(this).html().trim();
			character.sessionSave();
		});
		
		
		
		/******************
		 * Card Actions
		 *
		 * These are the events for the cards themseleves 
		 ******************/
		
		// Shows the card when it is double clicked
		$(document).delegate(".card","dblclick",function(){
			viewCard($(this).attr('card'));return false;
		})
		
		// Sets the cards to be sortable / draggable
		$(".deckContent").sortable({
			connectWith: ".deckContent",
			appendTo: "#decks",
			helper: "clone",
			start: function(event,ui){
				showTrash();
			},
			stop: function(event,ui){
				hideTrash();
			},
			update: function(event, ui) {
				updateDecks();
				return true;
			},
			cancel: 'disabled',
			cursor: 'move',
			zIndex: 5000,
		}).disableSelection();
		
		$(".deckContent").scroll(function(e, el){
			$(this).scrollLeft(0);
		});
		
		// This sets the onclick action in the loading dialog box
		/// It shows the card preview based on the selected character.
		$(document).delegate(".loadable-character","click",function(){
			$('.loadable-character').each(function(){
				$(this).removeClass('chosen');
			})
			$this = $(this);
			$this.addClass('chosen');
			//Show image
			characterShort = $this.data('character');
			if ( characterShort ){
				console.log(characterShort);
				if ( characterShort.image ){
					$('#character-image img').attr('src', 'http://testcb.untoldthegame.com/Version1.3/card_imgs/'+characterShort.image);
				}else{
					$('#character-image img').attr('src', 'images/unknown.png');
				}
			}
			
		})
		

		</script>
		
	</body>
</html>